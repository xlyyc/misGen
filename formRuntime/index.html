<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>业务设计器</title>
<link href="lib/jquery.ui/themes/redmond/jquery-ui.min.css" rel="stylesheet">
<link href="lib/jquery.ui.multiselect/css/jquery.multiselect.css" rel="stylesheet">
<link href="lib/jquery.ui.multiselect/css/jquery.multiselect.filter.css" rel="stylesheet">
<link href="lib/jquery.ztree/css/zTreeStyle/zTreeStyle.css" rel="stylesheet">


<link href="lib/lovey/style/css/ui_toolbar.css" rel="stylesheet" type="text/css"/>
<link href="lib/lovey/style/css/ui_btn.css" rel="stylesheet" type="text/css"/>
<link href="lib/lovey/style/css/ui_icon.css" rel="stylesheet" type="text/css"/>

<link href="lib/wis/lib/ligerUI/skins/Aqua/css/ligerui-all.css" rel="stylesheet" type="text/css" />


<style type="text/css">
<!--
	* {
		margin:0;
		padding:0
	}
	body{
		font: 12px "Trebuchet MS", sans-serif;
	}
-->
</style>
<script src="lib/jquery/jquery.min.js"></script>
<script src="lib/jquery.ui/jquery-ui-1.10.1.custom.min.js"></script>
<script src="lib/jquery.ui.multiselect/js/jquery.multiselect.min.js"></script>
<script src="lib/jquery.ui.multiselect/js/jquery.multiselect.filter.min.js"></script>
<script src="lib/jquery.ztree/js/jquery.ztree.all-3.5.js"></script>
<script src="lib/json2.js"></script>
<script src="lib/fixConsole.js"></script>
<script src="lib/jsonpath-0.8.0.js"></script>
<script src="src/wof/kernel/initNamespace.js"></script>


<script src="src/wof/util/Hashtable.js"></script>
<script src="src/wof/util/ObjectManager.js"></script>
<script src="src/wof/util/Observer.js"></script>
<script src="src/wof/util/ArrayList.js"></script>
<script src="src/wof/util/Selector.js"></script>
<script src="src/wof/util/SelectorList.js"></script>
<script src="src/wof/util/GlobalObject.js"></script>
<script src="src/wof/util/Tool.js"></script>

<script src="src/wof/widget/Tab.js"></script>
<script src="src/wof/widget/TabItem.js"></script>
<script src="src/wof/widget/Toolbar.js"></script>
<script src="src/wof/widget/ToolbarItem.js"></script>
<script src="src/wof/widget/Grid.js"></script>
<script src="src/wof/widget/Button.js"></script>
<script src="src/wof/widget/DateBox.js"></script>
<script src="src/wof/widget/Label.js"></script>
<script src="src/wof/widget/Input.js"></script>
<script src="src/wof/widget/Text.js"></script>
<script src="src/wof/widget/RadioGroupItem.js"></script>
<script src="src/wof/widget/RadioGroup.js"></script>
<script src="src/wof/widget/ComboBox.js"></script>
<script src="src/wof/widget/Tree.js"></script>

<script src="src/wof/bizWidget/FlowLayout.js"></script>
<script src="src/wof/bizWidget/FlowLayoutSection.js"></script>
<script src="src/wof/bizWidget/FlowLayoutItem.js"></script>
<script src="src/wof/bizWidget/FlowLayoutHelper.js"></script>
<script src="src/wof/bizWidget/GridLayout.js"></script>
<script src="src/wof/bizWidget/VoucherComponent.js"></script>
<script src="src/wof/bizWidget/VoucherItemGroup.js"></script>
<script src="src/wof/bizWidget/VoucherItem.js"></script>
<script src="src/wof/bizWidget/VoucherGridComponent.js"></script>
<script src="src/wof/bizWidget/VoucherGridComponentColumn.js"></script>
<script src="src/wof/bizWidget/GridComponentColumn.js"></script>
<script src="src/wof/bizWidget/VoucherGridComponent.js"></script>
<script src="src/wof/bizWidget/SearchComponent.js"></script>
<script src="src/wof/bizWidget/SearchItem.js"></script>
<script src="src/wof/bizWidget/DataObject.js"></script>

<script src="src/wof/functionWidget/CommitComponent.js"></script>
<script src="src/wof/functionWidget/ViewRecordComponent.js"></script>
<script src="src/wof/functionWidget/UpdateRecordComponent.js"></script>
<script src="src/wof/functionWidget/DeleteRecordComponent.js"></script>
<script src="src/wof/functionWidget/AddRecordComponent.js"></script>

<script src="src/wof/kernel/initAOP.js"></script>



<!--<link href="lib/lovey/style/css/lovey.css" rel="stylesheet" type="text/css"/>
<link href="lib/lovey/js/plugins/combobox/default/combobox.css" rel="stylesheet" type="text/css"/>
<script src="lib/lovey/js/lovey_common.js"></script>
<script src="lib/lovey/js/plugins/combobox/ligercombobox.js"></script>-->


<script src="lib/wis/lib/ligerUI/js/core/base.js" type="text/javascript"></script>
<script src="lib/wis/lib/ligerUI/js/plugins/ligerCheckBox.js" type="text/javascript"></script>
<script src="lib/wis/lib/ligerUI/js/plugins/ligerResizable.js" type="text/javascript"></script>
<script src="lib/wis/lib/ligerUI/js/plugins/ligerComboBox.js" type="text/javascript"></script>



<script src="lib/wis/src/wis/kernel/initNamespace.js"></script>

<script src="lib/wis/src/wis/util/Hashtable.js"></script>
<script src="lib/wis/src/wis/util/ObjectManager.js"></script>
<script src="lib/wis/src/wis/util/Observer.js"></script>
<script src="lib/wis/src/wis/util/ArrayList.js"></script>
<script src="lib/wis/src/wis/util/Selector.js"></script>
<script src="lib/wis/src/wis/util/SelectorList.js"></script>
<script src="lib/wis/src/wis/util/GlobalObject.js"></script>
<script src="lib/wis/src/wis/util/Tool.js"></script>

<script src="lib/wis/src/wis/widget/Button.js"></script>
<script src="lib/wis/src/wis/widget/Input.js"></script>
<script src="lib/wis/src/wis/widget/Tab.js"></script>
<script src="lib/wis/src/wis/widget/ComboBox.js"></script>

<script src="lib/wis/src/wis/kernel/initSystem.js"></script>

<script>

jQuery(function(){
	var container = jQuery('#container');
	function layout(){
		var windowWidth = jQuery(window).width();
		var windowHeight = jQuery(window).height();
		container.css('width', windowWidth+'px');
		container.css('height', windowHeight+'px');
		container.css('left', '0px');
		container.css('top', '0px');
	}
	function initContent(){
		var windowWidth = jQuery(window).width();
		var windowHeight = jQuery(window).height();


        //创建数据对象
        var dataObjectInstance = wof$.create('DataObject', {'pageId':'pageId1'});


        //查询数据
        //dataObjectInstance.queryData('main', null, null, 0, 100);
        //修改数据
        //dataObjectInstance.updateData([{"zglbref.lbbz":"外聘员工111","zgid":"362646149296820224"}]);
        //删除数据
        //dataObjectInstance.deleteData([{"zgid":"362646149296820224"}]);
        //增加数据
        //dataObjectInstance.addData([{"zglbref.lbbz":"好员工222","zgid":wof.util.Tool.uuid()}]);
        //撤销删除数据
        //dataObjectInstance.undeleteData();
        //保存数据
        //dataObjectInstance.saveData();

        var flowLayoutHelper = wof$.create('FlowLayoutHelper');

        var flowLayout = wof$.create('FlowLayout');
        flowLayout.setComponentName('flowLayout1');
        flowLayout.setLeft(0);
        flowLayout.setTop(0);
        flowLayout.setWidth(windowWidth-10);
        flowLayout.setCols(4);
        flowLayout.setItemHeight(300);

        flowLayout.insertSection({title:'默认分组1',titleHeight:30,cols:3});

        flowLayout.insertSection({title:'默认分组2',titleHeight:30,cols:2,itemHeight:200,isAutoExt:true});

        flowLayout.appendTo(container);

        var flowLayout2 = wof$.create('FlowLayout');
        flowLayout2.setLeft(0);
        flowLayout2.setTop(0);
        flowLayout2.setWidth(400);
        flowLayout2.setCols(2);
        flowLayout2.setItemHeight(400);
        flowLayout2.insertSection({title:'嵌套流式',titleHeight:30,cols:2,itemHeight:300});

        flowLayout.insertNode(flowLayout2,{row:1,col:2},1);

        flowLayout.render();

        var flowLayout3 = flowLayout2.clone();
        flowLayout.insertNode(flowLayout3,{row:1,col:3},1);

        flowLayout3.render();

        var voucherComponent = wof$.create('VoucherComponent',{'state':'Add'});       //Edit View
        voucherComponent.setDataSource(dataObjectInstance);
        voucherComponent.setBindEntityID('JZGJBXXB');
        voucherComponent.setLeft(0);
        voucherComponent.setTop(0);
        voucherComponent.setWidth(500);
        voucherComponent.setItemHeight(60);
        /*voucherComponent.setFkField('zzmmbm');
        voucherComponent.setFkFieldValue('aaaaaaaaaaaaaaaaaaaaaa');*/
        voucherComponent.setViewType('tab');

        var voucherItemGroupData1 = {groupCaption:'表头分组1',width:500,titleHeight:50,colsNum:4,itemHeight:150,isHead:false};
        voucherComponent.insertVoucherItemGroup(voucherItemGroupData1);
        var voucherItemGroupData2 = {groupCaption:'表头分组2',width:500,titleHeight:25,colsNum:4,itemHeight:45};
        voucherComponent.insertVoucherItemGroup(voucherItemGroupData2);

        var voucherItemsData = [];
        var voucherItemData1 = {
            colspan:'1',
            rowspan:'1',
            isFixItem:'true',
            itemName:'xm',
            visiable:'true',
            itemLabel:'姓名',
            dataField:'xm',
            dateTimeBoxFormat:'',
            readOnly:'false',
            required:'false',
            length:'',
            min:'',
            max:'',
            regExp:'',
            checkErrorInfo:'',
            visbleType:'text',
            selectPattern:'',
            useMultiSelect:'',
            labelWidth:'50',
            inputWidth:'70',
            inputHeight:'20',
            linkageItem:'',
            tipValue:''
        };
        voucherItemsData.push(voucherItemData1);
     /*   var test = {
            "checkErrorInfo":"",
            "colspan":1,
            "dataField":"zzjgref.zzmc",
            "dateTimeBoxFormat":"yyyy-MM-dd",
            "inputHeight":20,
            "inputWidth":100,
            "itemLabel":"工号",
            "itemName":"",
            "labelWidth":160,
            "length":0,
            "linkageItem":"",
            "max":0,
            "min":0,
            "regExp":"",
            "rowspan":1,
            "selectPattern":"normal",
            "tipValue":"",
            "useMultiSelect":"0",
            "visbleType":"text",
            "isFixItem":false,
            "readOnly":false,
            "required":false,
            "visiable":false
        };
        voucherItemsData.push(test);*/
        var voucherItemData2 = {
            colspan:'1',
            rowspan:'1',
            isFixItem:'true',
            itemName:'zzjgref.zzmc',
            visiable:'true',
            itemLabel:'院系',
            dataField:'zzjgref.zzmc',
            dateTimeBoxFormat:'',
            readOnly:'false',
            required:'false',
            length:'',
            min:'',
            max:'',
            regExp:'',
            checkErrorInfo:'',
            visbleType:'select',
            selectPattern:'',
            useMultiSelect:'',
            labelWidth:'50',
            inputWidth:'70',
            inputHeight:'20',
            linkageItem:'',
            tipValue:''
        };
        voucherItemsData.push(voucherItemData2);

        var voucherItemData3 = {
            colspan:'1',
            rowspan:'1',
            isFixItem:'true',
            itemName:'zzjgref.zzmc',
            visiable:'true',
            itemLabel:'院11系',
            dataField:'zzjgref.zzmc',
            dateTimeBoxFormat:'',
            readOnly:'false',
            required:'false',
            length:'',
            min:'',
            max:'',
            regExp:'',
            checkErrorInfo:'',
            visbleType:'select',
            selectPattern:'',
            useMultiSelect:'',
            labelWidth:'50',
            inputWidth:'70',
            inputHeight:'20',
            linkageItem:'',
            tipValue:''
        };
        voucherItemsData.push(voucherItemData3);

        var voucherItemData4 = {
            colspan:'1',
            rowspan:'1',
            isFixItem:'true',
            itemName:'zzjgref.zzmc',
            visiable:'true',
            itemLabel:'院22系',
            dataField:'zzjgref.zzmc',
            dateTimeBoxFormat:'',
            readOnly:'false',
            required:'false',
            length:'',
            min:'',
            max:'',
            regExp:'',
            checkErrorInfo:'',
            visbleType:'select',
            selectPattern:'',
            useMultiSelect:'',
            labelWidth:'50',
            inputWidth:'70',
            inputHeight:'20',
            linkageItem:'',
            tipValue:''
        };
        voucherItemsData.push(voucherItemData4);

        voucherComponent.insertVoucherItems(voucherItemsData,{rowNum:1,colNum:1}, 1);


        /*var voucherItemData1 = {
            colspan:'1',
            rowspan:'1',
            isFixItem:'true',
            itemName:'xm',
            visiable:'true',
            itemLabel:'姓名',
            dataField:'xm',
            dateTimeBoxFormat:'',
            readOnly:'false',
            required:'false',
            length:'',
            min:'',
            max:'',
            regExp:'',
            checkErrorInfo:'',
            visbleType:'text',
            selectPattern:'',
            useMultiSelect:'',
            labelWidth:'50',
            inputWidth:'70',
            inputHeight:'20',
            linkageItem:'',
            tipValue:''
        };
        voucherComponent.insertVoucherItem(voucherItemData1,{rowNum:1,colNum:1}, 2);
        var voucherItemData2 = {
            colspan:'1',
            rowspan:'1',
            isFixItem:'true',
            itemName:'XBref.xbmc',
            visiable:'true',
            itemLabel:'性别',
            dataField:'XBref.xbmc',
            dateTimeBoxFormat:'',
            readOnly:'false',
            required:'false',
            length:'',
            min:'',
            max:'',
            regExp:'',
            checkErrorInfo:'',
            visbleType:'select',
            selectPattern:'',
            useMultiSelect:'',
            labelWidth:'50',
            inputWidth:'70',
            inputHeight:'20',
            linkageItem:'',
            tipValue:''
        };
        voucherComponent.insertVoucherItem(voucherItemData2,{rowNum:1,colNum:2}, 1);*/

        //voucherComponent.updateVoucherItem(voucherItemData1,{rowNum:1,colNum:2}, 1);

        flowLayout.insertNode(voucherComponent,{row:1,col:1},2);

        voucherComponent.render();

        var voucherComponent2 = voucherComponent.clone();
        voucherComponent2.setDataSource(dataObjectInstance);
        flowLayout.insertNode(voucherComponent2,{row:1,col:2},2);
        voucherComponent2.render();


      /*  var tab = wis$.create('Tab');
        tab.setHeight(200);
        tab.insertItem({name:'name1',width:100,label:'label1',closeable:true,icon:'add',iconPosition:'left'});
        tab.insertItem({name:'name2',width:100,label:'label2',closeable:true,icon:'add',iconPosition:'left'});
        tab.insertItem({name:'name3',width:100,label:'label3',closeable:true,icon:'add',iconPosition:'left'});
        tab.appendTo(container);
        tab.render();
        tab.render();
        tab.removeItemByName('name2');
        tab.render();
        tab.render();
       // tab.removeItemByIndex(1);
        tab.render();

        tab.insertNode(jQuery('<div>我的测试哈哈</div>'),1);

        tab.render();

        var newTab = tab.clone();
        newTab.setTop(300);
        newTab.insertNode(jQuery('<div>wwwwwww</div>'),1);
        newTab.appendTo(container);
        newTab.render();*/

        var searchComponentData = {
            left:0,
            top:0,
            width:200,
            colsNum:2,
            itemHeight:100
        };
        var searchComponent = wof$.create('SearchComponent',searchComponentData);
        searchComponent.setDataSource(dataObjectInstance);

        var searchItemData = {
            colspan:'2',
            rowspan:'1',
            isFixItem:'true',
            name:'xb',
            caption:'性别',
            dataField:'xb',
            dateTimeBoxFormat:'',
            selectPattern:'',
            useMultiSelect:'',
            visbleType:'text',
            fromTo:'false',
            labelWidth:'50',
            inputWidth:'70',
            inputHeight:'20',
            tipValue:'',
            linkageItem:''
        };


/*wof$.create('SearchComponent',{"left":0,"top":0,"colsNum":4,"itemHeight":45,"width":"775"});
        comp_searchComp1.setComponentId('944EE91C978440EA86D244C0512A2742');
        comp_searchComp1.setComponentName('searchComp1');
        comp_searchComp1.setDataSource(emap_dataObject);
        comp_searchComp1.setLinkComponentID('59E21C893D3846F9B9BC266C34369D37');
        comp_searchComp1.setCaption('搜索');
        comp_searchComp1.setIndex('');
        comp_searchComp1.setInitActionName('');
        comp_searchComp1.setName('');
        comp_searchComp1.setState('');
        comp_searchComp1.insertSearchItems(
                [
                    {
                        "tipValue":"",
                        "index":null,
                        "labelWidth":null,
                        "linkageItem":"",
                        "colspan":1,
                        "selectPattern":null,"inputHeight":20,
                        "useMultiSelect":"FALSE",
                        "caption":"学号",
                        "inputWidth":100,
                        "dataTimeBoxFormat":"YYYY_MM_DD",
                        "rowspan":1,
                        "dataFiled":"XSJBXXB.xh",
                        "name":"","visibleType":"text"
                    },
                    {
                        "tipValue":"",
                        "index":null,
                        "labelWidth":null,
                        "linkageItem":"",
                        "colspan":1,
                        "selectPattern":null,
                        "inputHeight":20,
                        "useMultiSelect":"FALSE",
                        "caption":"姓名",
                        "inputWidth":100,
                        "dataTimeBoxFormat":"YYYY_MM_DD",
                        "rowspan":1,
                        "dataFiled":"XSJBXXB.xm",
                        "name":"",
                        "visibleType":"text"
                    },
                    {"tipValue":"","index":null,"labelWidth":null,"linkageItem":"","colspan":1,"selectPattern":null,"inputHeight":20,"useMultiSelect":"FALSE","caption":"性别","inputWidth":100,"dataTimeBoxFormat":"YYYY_MM_DD","rowspan":1,"dataFiled":"","name":"","visibleType":"select"},{"tipValue":"","index":null,"labelWidth":null,"linkageItem":"","colspan":1,"selectPattern":null,"inputHeight":20,"useMultiSelect":"FALSE","caption":"年龄","inputWidth":100,"dataTimeBoxFormat":"YYYY_MM_DD","rowspan":1,"dataFiled":"XSJBXXB.nl","name":"","visibleType":"text"}],{rowNum:1,colNum:1});
        if(comp_searchComp1!=undefined)
            flowLayout_layoutComp1.insertNode(comp_searchComp1,{row:1,col:1},1,{rowspan:1,colspan:1,isFixItem:false});
        if(comp_searchComp1!=undefined)comp_searchComp1.render();

        */


        //searchComponent.insertSearchItem(searchItemData,{rowNum:1,colNum:1});

        var searchItemsData = [

        ];
        searchItemsData.push(searchItemData);
        searchComponent.insertSearchItems(searchItemsData, {rowNum:1,colNum:1});

        flowLayout.insertNode(searchComponent,{row:1,col:1},1);

        searchComponent.render();

    }
	//重设工作区
	function resizeContent(){
		try{
			var windowWidth = jQuery(window).width();
			var windowHeight = jQuery(window).height();
			var layout = getContentLayout();
            layout.setWidth(windowWidth-10);

            layout.sendMessage('wof.bizWidget.FlowLayout_resize');
		}catch(e){
        }
	}
	jQuery(window).load(function(){
		layout();
        initContent();
	});
	jQuery(window).resize(function(){
		layout();
        resizeContent();
	});
});
window.getContentLayout = function(){
    var oid = jQuery('#container').children('div[oid]').first().attr('oid');
    var objs = wof$.find('*');
    for(var i=0;i<objs.size();i++){
        var obj = objs.get(i);
        console.log('obj.getClassName()==='+obj.getClassName());
    }
    var id = wof$.getComponentIdByName('flowLayout1');
    return wof$.find('#'+oid).get(0);
}
</script>
</head>
<body>
<div id="container" style="position:absolute;"></div>
</body>
</html>
